(self.webpackChunkmidi_visual=self.webpackChunkmidi_visual||[]).push([[422,288],{288:e=>{!function(){"use strict";const t={debug:!1,parse:function(e,r){if(e instanceof Uint8Array)return t.Uint8(e);if("string"==typeof e)return t.Base64(e);if(e instanceof HTMLElement&&"file"===e.type)return t.addListener(e,r);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(e,r){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(void 0===e||!(e instanceof HTMLElement)||"INPUT"!==e.tagName||"file"!==e.type.toLowerCase())return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;r=r||function(){},e.addEventListener("change",(function(e){if(!e.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let a=new FileReader;a.readAsArrayBuffer(e.target.files[0]),a.onload=function(e){r(t.Uint8(new Uint8Array(e.target.result)))}}))},Base64:function(e){let r=function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";if(e=e.replace(/^.*?base64,/,""),e=String(e).replace(/[\t\n\f\r ]+/g,""),!/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/.test(e))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");e+="==".slice(2-(3&e.length));let r,a,n,i="",d=0;for(;d<e.length;)r=t.indexOf(e.charAt(d++))<<18|t.indexOf(e.charAt(d++))<<12|(a=t.indexOf(e.charAt(d++)))<<6|(n=t.indexOf(e.charAt(d++))),i+=64===a?String.fromCharCode(r>>16&255):64===n?String.fromCharCode(r>>16&255,r>>8&255):String.fromCharCode(r>>16&255,r>>8&255,255&r);return i}(e=String(e)),a=r.length,n=new Uint8Array(new ArrayBuffer(a));for(let e=0;e<a;e++)n[e]=r.charCodeAt(e);return t.Uint8(n)},Uint8:function(e){let t={data:null,pointer:0,movePointer:function(e){return this.pointer+=e,this.pointer},readInt:function(e){if((e=Math.min(e,this.data.byteLength-this.pointer))<1)return-1;let t=0;if(e>1)for(let r=1;r<=e-1;r++)t+=this.data.getUint8(this.pointer)*Math.pow(256,e-r),this.pointer++;return t+=this.data.getUint8(this.pointer),this.pointer++,t},readStr:function(e){let t="";for(let r=1;r<=e;r++)t+=String.fromCharCode(this.readInt(1));return t},readIntVLV:function(){let e=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)e=this.readInt(1);else{let t=[];for(;this.data.getUint8(this.pointer)>=128;)t.push(this.readInt(1)-128);let r=this.readInt(1);for(let r=1;r<=t.length;r++)e+=t[t.length-r]*Math.pow(128,r);e+=r}return e}};if(t.data=new DataView(e.buffer,e.byteOffset,e.byteLength),1297377380!==t.readInt(4))return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;t.readInt(4);let r={};r.formatType=t.readInt(2),r.tracks=t.readInt(2),r.track=[];let a=t.readInt(1),n=t.readInt(1);a>=128?(r.timeDivision=[],r.timeDivision[0]=a-128,r.timeDivision[1]=n):r.timeDivision=256*a+n;for(let e=1;e<=r.tracks;e++){r.track[e-1]={event:[]};let a=t.readInt(4);if(-1===a)break;if(1297379947!==a)return!1;t.readInt(4);let n,i,d=0,s=!1;for(;!s&&(d++,r.track[e-1].event[d-1]={},r.track[e-1].event[d-1].deltaTime=t.readIntVLV(),n=t.readInt(1),-1!==n);)if(n>=128?i=n:(n=i,t.movePointer(-1)),255===n){r.track[e-1].event[d-1].type=255,r.track[e-1].event[d-1].metaType=t.readInt(1);let a=t.readIntVLV();switch(r.track[e-1].event[d-1].metaType){case 47:case-1:s=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:r.track[e-1].event[d-1].data=t.readStr(a);break;case 33:case 89:case 81:r.track[e-1].event[d-1].data=t.readInt(a);break;case 84:r.track[e-1].event[d-1].data=[],r.track[e-1].event[d-1].data[0]=t.readInt(1),r.track[e-1].event[d-1].data[1]=t.readInt(1),r.track[e-1].event[d-1].data[2]=t.readInt(1),r.track[e-1].event[d-1].data[3]=t.readInt(1),r.track[e-1].event[d-1].data[4]=t.readInt(1);break;case 88:r.track[e-1].event[d-1].data=[],r.track[e-1].event[d-1].data[0]=t.readInt(1),r.track[e-1].event[d-1].data[1]=t.readInt(1),r.track[e-1].event[d-1].data[2]=t.readInt(1),r.track[e-1].event[d-1].data[3]=t.readInt(1);break;default:null!==this.customInterpreter&&(r.track[e-1].event[d-1].data=this.customInterpreter(r.track[e-1].event[d-1].metaType,t,a)),null!==this.customInterpreter&&!1!==r.track[e-1].event[d-1].data||(t.readInt(a),r.track[e-1].event[d-1].data=t.readInt(a),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(n=n.toString(16).split(""),n[1]||n.unshift("0"),r.track[e-1].event[d-1].type=parseInt(n[0],16),r.track[e-1].event[d-1].channel=parseInt(n[1],16),r.track[e-1].event[d-1].type){case 15:if(null!==this.customInterpreter&&(r.track[e-1].event[d-1].data=this.customInterpreter(r.track[e-1].event[d-1].type,t,!1)),null===this.customInterpreter||!1===r.track[e-1].event[d-1].data){let a=t.readIntVLV();r.track[e-1].event[d-1].data=t.readInt(a),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break;case 10:case 11:case 14:case 8:case 9:r.track[e-1].event[d-1].data=[],r.track[e-1].event[d-1].data[0]=t.readInt(1),r.track[e-1].event[d-1].data[1]=t.readInt(1);break;case 12:case 13:r.track[e-1].event[d-1].data=t.readInt(1);break;case-1:s=!0;break;default:if(null!==this.customInterpreter&&(r.track[e-1].event[d-1].data=this.customInterpreter(r.track[e-1].event[d-1].metaType,t,!1)),null===this.customInterpreter||!1===r.track[e-1].event[d-1].data)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return r},customInterpreter:null};e.exports=t}()},422:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MidiParser:()=>n}),r(288);let a="object"==typeof window&&window.self===window&&window||"object"==typeof self&&self.self===self&&self||"object"==typeof r.g&&r.g.global===r.g&&r.g,n=a.MidiParser;delete a.MidiParser}}]);